<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/assets/style/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="/assets/style/midias.css">
    <title>GranaFlow</title>
</head>

<body class="body">
    <div id="nav-placeholder"></div>

<script>
    fetch('../pages/nav.html')
        .then(res => res.text())
        .then(data => {
            document.getElementById('nav-placeholder').innerHTML = data;

            // Aguarda o DOM ser atualizado completamente após o .innerHTML
            setTimeout(() => {
                const btn = document.getElementById('btn_esconder');
                const nav = document.querySelector('.container_nav');

                if (btn && nav) {
                    btn.addEventListener('click', function () {
                        if (nav.style.display === 'none') {
                            nav.style.display = 'flex';
                            btn.style.left = '40px'
                        } else {
                            nav.style.display = 'none';
                            btn.style.left = '3px'
                        }
                    });
                } else {
                    console.warn("Botão ou nav não encontrado após fetch");
                }
            }, 50); // aguarda 50ms para garantir que foi renderizado
        });
</script>


    <div class="main" id="main">
        <div class="container_home">
            <div class="main_home">
                <!-- <div class="container_home_title">
                     <h1>GranaFlow</h1>
                </div> -->
                <div class="container_home_content">
                    <div class="card receita">
                        <h3 class="card_title">Receitas do Mês</h3>
                        <p class="card_valor" id="total_receitas">R$ -</p>
                    </div>
                    <div class="card despesa">
                        <h3 class="card_title">Despesas do Mês</h3>
                        <p class="card_valor" id="total_despesas">R$ -</p>
                    </div>
                    <div class="card saldo">
                        <h3 class="card_title">Saldo Atual</h3>
                        <p class="card_valor" id="total_geral">R$ -</p>
                    </div>
                </div>
            </div>
            <div class="container_center">
                <h1 class="container_center_subtitle">Ultimas Movimentações</h1>
                <div class="tabela_transacoes">
                    <table class="table" id="tabela_movimentacoes">
                        <thead>
                            <tr id="header_table" class="table_row">
                                <th>Categoria</th>
                                <th>Valor</th>
                                <th>Descrição</th>
                                <th>Data</th>
                                <th>Instituição</th>
                                <th>
                                    <i id="add_button" class="icon fa-solid fa-plus"></i>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Formulário oculto para adicionar nova movimentação -->
    <div id="form-container">
        <div>
            <select id="input_categoria" required>
                <option value="" disabled selected>Categoria</option>
                <option value="Receitas">Receitas</option>
                <option value="Despesas">Despesas</option>
            </select>
            <input type="number" id="input_valor" placeholder="Valor" required>
            <input type="text" id="input_descricao" placeholder="Descrição" required>
            <input type="date" id="input_data" required>
            <select id="input_instituicao" required>
                <option value="" disabled selected>Instituição</option>
                <option value="Nubank">Nubank</option>
                <option value="Inter">Inter</option>
                <option value="Sicredi">Sicredi</option>
                <option value="Banco do Brasil">Banco do Brasil</option>
            </select>

            <button id="confirmar_add">Adicionar</button>
            <button id="Cancelar_add">Cancelar</button>
        </div>
    </div>
</body>
<!-- <script src="https://cdn.jsdelivr.net/npm/notyf/notyf.min.js"></script> -->
<script src="../script.js"></script>

</html>